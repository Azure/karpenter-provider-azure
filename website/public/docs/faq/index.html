<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.145.0">



<title>FAQ | Karpenter for Azure</title>
<meta name="description" content="Frequently asked questions about Karpenter for Azure
">

<meta property="og:url" content="//localhost:1313/docs/faq/">
  <meta property="og:site_name" content="Karpenter for Azure">
  <meta property="og:title" content="FAQ">
  <meta property="og:description" content="Frequently asked questions about Karpenter for Azure">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="og:image" content="//localhost:1313/banner.png">


  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="//localhost:1313/banner.png">
  <meta name="twitter:title" content="FAQ">
  <meta name="twitter:description" content="Frequently asked questions about Karpenter for Azure">






<link href="/scss/main.css" rel="stylesheet">


  </head>
  <body class="td-page">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg viewBox="0 0 500 443" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M237.704918.0C314.662629.0 377.04918 62.3865513 377.04918 139.344262L377.049 336.352 442.622951 336.351852C474.31142 336.351852 5e2 362.040432 5e2 393.728901V443h-7.546066c-18.225271.0-33.094961-14.592764-33.437541-32.814815V401.960534L459.013099 401.553891C458.795948 388.160675 447.871194 377.37037 434.42623 377.37037H106.557377c-58.8500143.0-106.557377-47.707362-106.557377-106.557377L-100611761e-22 139.344262c0-76.9577107 62.3865513-139.344262 139.344262-139.344262zm-8.196721 41.0185185H147.540984L145.778863 41.0327942C87.7415928 41.97378 40.9836066 89.3143814 40.9836066 147.575896V270.778081L40.9923916 271.862464C41.5714598 307.577706 70.7041376 336.351852 106.557377 336.351852H270.491803c36.215394.0 65.573771-29.358377 65.573771-65.573771V147.575896L336.051298 145.813774C335.110312 87.7765047 287.769711 41.0185185 229.508197 41.0185185zM147.868852 106.648148C157.213115 106.648148 164.590164 114.277593 164.590164 123.875926v49.960555l56.803279-58.574444C228.770492 108.370926 238.852459 107.878704 245.983607 114.523704V114.769815C252.868852 121.168704 252.377049 131.751481 244.754098 138.642593l-42.04918 43.315555 48.934426 69.895556C257.540984 260.467593 255.819672 271.296481 247.95082 276.464815 239.344262 281.387037 229.508197 278.679815 223.606557 270.065926l-44.016393-64.481111-15 15.751111v40.362222c0 9.84444500000001-7.377049 17.227778-16.721312 17.227778C138.52459 278.925926 131.147541 271.542593 131.147541 261.698148V123.875926c0-9.59833300000001 7.377049-17.227778 16.721311-17.227778z" id="white_square_logo" fill="#fff"/></g></svg></span><span class="navbar-brand__name">Karpenter for Azure</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/docs"><i class='fas fa-book'></i><span>Docs</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="https://github.com/Azure/karpenter-provider-azure" target="_blank"><i class='fab fa-github'></i><span>GitHub</span></a>
      </li>
      <li class="nav-item dropdown mr-4 d-none d-lg-block">
        


	




<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	v1.5.5  (latest) 
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink" id="navbarVersionSelector">
	
	<a class="dropdown-item" href='/v1.5.5//faq/' data-docs-version="v1.5.5">
		v1.5.5  (latest) 
	</a>
	
</div>
</li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    
  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" title="Documentation" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Docs</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsgetting-started-li">
  <input type="checkbox" id="m-docsgetting-started-check"/>
  <label for="m-docsgetting-started-check"><a href="/docs/getting-started/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsgetting-started"><span class="">Getting Started</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgetting-startedquickstart-li">
  <input type="checkbox" id="m-docsgetting-startedquickstart-check"/>
  <label for="m-docsgetting-startedquickstart-check"><a href="/docs/getting-started/quickstart/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsgetting-startedquickstart"><span class="">Quickstart</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsconcepts-li">
  <input type="checkbox" id="m-docsconcepts-check"/>
  <label for="m-docsconcepts-check"><a href="/docs/concepts/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsconcepts"><span class="">Concepts</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptsnodepools-li">
  <input type="checkbox" id="m-docsconceptsnodepools-check"/>
  <label for="m-docsconceptsnodepools-check"><a href="/docs/concepts/nodepools/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsconceptsnodepools"><span class="">NodePools</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptsnodeclasses-li">
  <input type="checkbox" id="m-docsconceptsnodeclasses-check"/>
  <label for="m-docsconceptsnodeclasses-check"><a href="/docs/concepts/nodeclasses/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsconceptsnodeclasses"><span class="">NodeClasses</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptsscheduling-li">
  <input type="checkbox" id="m-docsconceptsscheduling-check"/>
  <label for="m-docsconceptsscheduling-check"><a href="/docs/concepts/scheduling/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsconceptsscheduling"><span class="">Scheduling</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptsdisruption-li">
  <input type="checkbox" id="m-docsconceptsdisruption-check"/>
  <label for="m-docsconceptsdisruption-check"><a href="/docs/concepts/disruption/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsconceptsdisruption"><span class="">Disruption</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptsnap-vs-self-hosted-li">
  <input type="checkbox" id="m-docsconceptsnap-vs-self-hosted-check"/>
  <label for="m-docsconceptsnap-vs-self-hosted-check"><a href="/docs/concepts/nap-vs-self-hosted/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsconceptsnap-vs-self-hosted"><span class="">NAP vs Self-Hosted</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsreference-li">
  <input type="checkbox" id="m-docsreference-check"/>
  <label for="m-docsreference-check"><a href="/docs/reference/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsreference"><span class="">Reference</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencesettings-li">
  <input type="checkbox" id="m-docsreferencesettings-check"/>
  <label for="m-docsreferencesettings-check"><a href="/docs/reference/settings/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsreferencesettings"><span class="">Settings</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencecustom-networking-li">
  <input type="checkbox" id="m-docsreferencecustom-networking-check"/>
  <label for="m-docsreferencecustom-networking-check"><a href="/docs/reference/custom-networking/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsreferencecustom-networking"><span class="">Custom Networking</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferenceinstance-types-li">
  <input type="checkbox" id="m-docsreferenceinstance-types-check"/>
  <label for="m-docsreferenceinstance-types-check"><a href="/docs/reference/instance-types/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsreferenceinstance-types"><span class="">Instance Types</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencenodepool-examples-li">
  <input type="checkbox" id="m-docsreferencenodepool-examples-check"/>
  <label for="m-docsreferencenodepool-examples-check"><a href="/docs/reference/nodepool-examples/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsreferencenodepool-examples"><span class="">NodePool Examples</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencenodepools-li">
  <input type="checkbox" id="m-docsreferencenodepools-check"/>
  <label for="m-docsreferencenodepools-check"><a href="/docs/reference/nodepools/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsreferencenodepools"><span class=""></span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docsfaq-li">
  <input type="checkbox" id="m-docsfaq-check" checked/>
  <label for="m-docsfaq-check"><a href="/docs/faq/" class="align-left pl-0  active td-sidebar-link td-sidebar-link__page" id="m-docsfaq"><span class="td-sidebar-nav-active-item">FAQ</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstroubleshooting-li">
  <input type="checkbox" id="m-docstroubleshooting-check"/>
  <label for="m-docstroubleshooting-check"><a href="/docs/troubleshooting/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docstroubleshooting"><span class="">Troubleshooting</span></a></label>
  
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href="https://github.com/Azure/karpenter-provider-azure/tree/main/website/content/en/docs/faq.md" class="td-page-meta--view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/Azure/karpenter-provider-azure/edit/main/website/content/en/docs/faq.md" class="td-page-meta--edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/Azure/karpenter-provider-azure/new/main/website/content/en/docs/faq.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/Azure/karpenter-provider-azure/issues/new?title=FAQ" class="td-page-meta--issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  
</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#general-questions">General Questions</a>
      <ul>
        <li><a href="#what-is-karpenter-for-azure">What is Karpenter for Azure?</a></li>
        <li><a href="#how-does-karpenter-for-azure-differ-from-the-cluster-autoscaler">How does Karpenter for Azure differ from the Cluster Autoscaler?</a></li>
        <li><a href="#is-karpenter-for-azure-production-ready">Is Karpenter for Azure production ready?</a></li>
      </ul>
    </li>
    <li><a href="#installation-and-configuration">Installation and Configuration</a>
      <ul>
        <li><a href="#what-permissions-does-karpenter-need-in-azure">What permissions does Karpenter need in Azure?</a></li>
        <li><a href="#can-i-use-karpenter-with-existing-aks-clusters">Can I use Karpenter with existing AKS clusters?</a></li>
        <li><a href="#do-i-need-to-remove-cluster-autoscaler-before-installing-karpenter">Do I need to remove Cluster Autoscaler before installing Karpenter?</a></li>
      </ul>
    </li>
    <li><a href="#node-management">Node Management</a>
      <ul>
        <li><a href="#which-azure-vm-sizes-does-karpenter-support">Which Azure VM sizes does Karpenter support?</a></li>
        <li><a href="#how-does-karpenter-handle-spot-vms">How does Karpenter handle spot VMs?</a></li>
        <li><a href="#can-i-mix-spot-and-regular-vms-in-the-same-nodepool">Can I mix spot and regular VMs in the same NodePool?</a></li>
      </ul>
    </li>
    <li><a href="#networking-and-security">Networking and Security</a>
      <ul>
        <li><a href="#what-networking-configurations-does-karpenter-support">What networking configurations does Karpenter support?</a></li>
        <li><a href="#how-does-karpenter-handle-network-security-groups">How does Karpenter handle network security groups?</a></li>
        <li><a href="#can-i-use-private-aks-clusters-with-karpenter">Can I use private AKS clusters with Karpenter?</a></li>
        <li><a href="#what-is-the-support-policy-for-bring-your-own-cni-byo-cni">What is the support policy for Bring Your Own CNI (BYO CNI)?</a></li>
      </ul>
    </li>
    <li><a href="#scaling-and-performance">Scaling and Performance</a>
      <ul>
        <li><a href="#whats-the-maximum-number-of-nodes-karpenter-can-manage">What&rsquo;s the maximum number of nodes Karpenter can manage?</a></li>
        <li><a href="#how-does-karpenter-decide-which-nodes-to-terminate">How does Karpenter decide which nodes to terminate?</a></li>
      </ul>
    </li>
    <li><a href="#troubleshooting">Troubleshooting</a>
      <ul>
        <li><a href="#why-arent-my-pods-being-scheduled">Why aren&rsquo;t my pods being scheduled?</a></li>
        <li><a href="#why-is-karpenter-not-terminating-underutilized-nodes">Why is Karpenter not terminating underutilized nodes?</a></li>
        <li><a href="#how-can-i-debug-karpenter-issues">How can I debug Karpenter issues?</a></li>
      </ul>
    </li>
    <li><a href="#cost-optimization">Cost Optimization</a>
      <ul>
        <li><a href="#how-much-can-karpenter-save-compared-to-static-node-groups">How much can Karpenter save compared to static node groups?</a></li>
        <li><a href="#does-karpenter-support-azure-reserved-instances">Does Karpenter support Azure Reserved Instances?</a></li>
        <li><a href="#how-can-i-optimize-costs-with-karpenter">How can I optimize costs with Karpenter?</a></li>
      </ul>
    </li>
    <li><a href="#integration-and-compatibility">Integration and Compatibility</a>
      <ul>
        <li><a href="#does-karpenter-work-with-azure-policy">Does Karpenter work with Azure Policy?</a></li>
        <li><a href="#can-i-use-karpenter-with-gitops-tools">Can I use Karpenter with GitOps tools?</a></li>
        <li><a href="#does-karpenter-support-windows-nodes">Does Karpenter support Windows nodes?</a></li>
      </ul>
    </li>
    <li><a href="#getting-help">Getting Help</a>
      <ul>
        <li><a href="#where-can-i-find-more-information">Where can I find more information?</a></li>
        <li><a href="#how-do-i-report-bugs-or-request-features">How do I report bugs or request features?</a></li>
        <li><a href="#is-there-commercial-support-available">Is there commercial support available?</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            

	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="//localhost:1313/docs/">Docs</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="//localhost:1313/docs/faq/" aria-disabled="true" class="btn-link disabled">FAQ</a>
  </li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>FAQ</h1>
	<div class="lead">Frequently asked questions about Karpenter for Azure</div>
	<header class="article-meta">
		

  

		
	</header>    
	<h2 id="general-questions">General Questions</h2>
<h3 id="what-is-karpenter-for-azure">What is Karpenter for Azure?</h3>
<p>Karpenter for Azure is a node lifecycle management solution for Azure Kubernetes Service (AKS) clusters. It automatically provisions right-sized nodes in response to unschedulable pods and removes nodes when they&rsquo;re no longer needed.</p>
<h3 id="how-does-karpenter-for-azure-differ-from-the-cluster-autoscaler">How does Karpenter for Azure differ from the Cluster Autoscaler?</h3>
<ul>
<li><strong>Direct VM management</strong>: Karpenter provisions VMs directly rather than scaling VM Scale Sets</li>
<li><strong>Faster provisioning</strong>: No need to pre-create VM Scale Sets for every combination of instance type and zone</li>
<li><strong>Better bin packing</strong>: Considers multiple instance types and zones simultaneously</li>
<li><strong>More flexible</strong>: Supports diverse instance types, zones, and capacity types without complex configuration</li>
</ul>
<h3 id="is-karpenter-for-azure-production-ready">Is Karpenter for Azure production ready?</h3>
<p>Karpenter for Azure is actively developed and used in production environments. However, always test thoroughly in your specific environment before production deployment.</p>
<h2 id="installation-and-configuration">Installation and Configuration</h2>
<h3 id="what-permissions-does-karpenter-need-in-azure">What permissions does Karpenter need in Azure?</h3>
<p>Karpenter requires permissions to:</p>
<ul>
<li>Create and delete Virtual Machines</li>
<li>Create and delete Network Interfaces</li>
<li>Read Virtual Network and Subnet information</li>
<li>Read VM sizes and availability</li>
<li>Manage Azure resource tags</li>
<li>Access spot VM pricing information</li>
</ul>
<h3 id="can-i-use-karpenter-with-existing-aks-clusters">Can I use Karpenter with existing AKS clusters?</h3>
<p>Yes, Karpenter can be installed on existing AKS clusters. However, ensure you disable cluster autoscaler and understand how it will interact with existing autoscaling solutions to avoid conflicts.</p>
<h3 id="do-i-need-to-remove-cluster-autoscaler-before-installing-karpenter">Do I need to remove Cluster Autoscaler before installing Karpenter?</h3>
<p>It&rsquo;s recommended to remove or disable Cluster Autoscaler to avoid conflicts. Eventually our team may support this path but for now its blocked.</p>
<h2 id="node-management">Node Management</h2>
<h3 id="which-azure-vm-sizes-does-karpenter-support">Which Azure VM sizes does Karpenter support?</h3>
<p>Karpenter supports most Azure VM sizes that are:</p>
<ul>
<li>Available in AKS</li>
<li>Have 2 or more vCPUs</li>
<li>Support standard Azure managed disks</li>
<li>Are available in your region and availability zones</li>
</ul>
<h3 id="how-does-karpenter-handle-spot-vms">How does Karpenter handle spot VMs?</h3>
<p>Karpenter supports Azure Spot VMs for cost savings. When using spot instances, be aware that they may be reclaimed by Azure when capacity is needed elsewhere.</p>
<h3 id="can-i-mix-spot-and-regular-vms-in-the-same-nodepool">Can I mix spot and regular VMs in the same NodePool?</h3>
<p>Yes, you can specify both <code>spot</code> and <code>on-demand</code> in the capacity type requirements. Karpenter will prefer spot instances when available.</p>
<h2 id="networking-and-security">Networking and Security</h2>
<h3 id="what-networking-configurations-does-karpenter-support">What networking configurations does Karpenter support?</h3>
<p>Karpenter supports:</p>
<ul>
<li>Azure CNI with subnet IP allocation</li>
<li>Azure CNI with overlay networking</li>
<li>Custom VNet configurations</li>
<li>Bring Your Own CNI (BYO CNI) configurations</li>
</ul>
<h3 id="how-does-karpenter-handle-network-security-groups">How does Karpenter handle network security groups?</h3>
<p>Karpenter uses the network security groups configured for your AKS cluster. It doesn&rsquo;t create or modify NSG rules.</p>
<h3 id="can-i-use-private-aks-clusters-with-karpenter">Can I use private AKS clusters with Karpenter?</h3>
<p>Karpenter should work with private AKS clusters but has limited testing, so use at your own discretion. Ensure the Karpenter controller can reach Azure APIs through private endpoints or NAT gateway.</p>
<h3 id="what-is-the-support-policy-for-bring-your-own-cni-byo-cni">What is the support policy for Bring Your Own CNI (BYO CNI)?</h3>
<p>Karpenter supports BYO CNI configurations following the same support policy as AKS:</p>
<p><strong>Supported</strong>: Karpenter-specific issues when using BYO CNI (node provisioning, scaling, lifecycle management)</p>
<p><strong>Not Supported</strong>: CNI-specific networking issues, configuration problems, or troubleshooting third-party CNI plugins</p>
<p>If you encounter networking issues while using BYO CNI, first determine whether the problem is Karpenter-specific or CNI-related. For CNI-specific issues, contact your CNI vendor or community support channels. For Karpenter integration issues, contact Karpenter support.</p>
<h2 id="scaling-and-performance">Scaling and Performance</h2>
<h3 id="whats-the-maximum-number-of-nodes-karpenter-can-manage">What&rsquo;s the maximum number of nodes Karpenter can manage?</h3>
<p>Karpenter can manage thousands of nodes, but practical limits depend on:</p>
<ul>
<li>AKS cluster limits (typically 1000-5000 nodes)</li>
<li>Azure subscription quotas</li>
<li>Network subnet IP address availability</li>
</ul>
<h3 id="how-does-karpenter-decide-which-nodes-to-terminate">How does Karpenter decide which nodes to terminate?</h3>
<p>Karpenter considers several factors:</p>
<ul>
<li>Node utilization and efficiency</li>
<li>Pod disruption budgets</li>
<li>Node age and expiration settings</li>
<li>Cost optimization opportunities</li>
</ul>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="why-arent-my-pods-being-scheduled">Why aren&rsquo;t my pods being scheduled?</h3>
<p>Common reasons include:</p>
<ul>
<li>No NodePool matches the pod&rsquo;s requirements</li>
<li>NodePool limits have been reached</li>
<li>Insufficient Azure quota or capacity</li>
<li>Pod has unsatisfiable constraints</li>
</ul>
<p>Check: <code>kubectl describe pod &lt;pod-name&gt;</code> and <code>kubectl logs -n karpenter deployment/karpenter</code></p>
<h3 id="why-is-karpenter-not-terminating-underutilized-nodes">Why is Karpenter not terminating underutilized nodes?</h3>
<p>Possible causes:</p>
<ul>
<li>Pods without proper tolerations</li>
<li>DaemonSets preventing node drain</li>
<li>Pod disruption budgets blocking eviction</li>
<li>Nodes marked with <code>do-not-disrupt</code> annotation</li>
</ul>
<h3 id="how-can-i-debug-karpenter-issues">How can I debug Karpenter issues?</h3>
<ol>
<li>
<p>Examine NodePool and AKSNodeClass status:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl describe nodepool &lt;name&gt;
</span></span><span style="display:flex;"><span>kubectl describe aksnodeclass &lt;name&gt;
</span></span></code></pre></div></li>
<li>
<p>Check NodeClaim status for provisioning failures:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl describe nodeclaim &lt;name&gt;
</span></span></code></pre></div><p>Note: The NodeClaim messages sometimes contain details about why previous provisioning attempts failed.</p>
</li>
<li>
<p>Review node and pod events:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get events --sort-by<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;.lastTimestamp&#39;</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="cost-optimization">Cost Optimization</h2>
<h3 id="how-much-can-karpenter-save-compared-to-static-node-groups">How much can Karpenter save compared to static node groups?</h3>
<p>Savings vary by workload but typically range from 20-60% through:</p>
<ul>
<li>Right-sizing instances to actual needs</li>
<li>Using spot instances when appropriate</li>
<li>Removing idle capacity quickly</li>
<li>Better bin packing efficiency</li>
</ul>
<h3 id="does-karpenter-support-azure-reserved-instances">Does Karpenter support Azure Reserved Instances?</h3>
<p>Karpenter can provision VMs that benefit from Reserved Instance pricing, but it doesn&rsquo;t directly manage reservations. Purchase reservations for your expected baseline capacity. You can configure a NodePool with higher weights and only the instance types from the reserved instances until you hit quota limits, then once that NodePool&rsquo;s instance types are exhausted it will fall back onto on-demand.</p>
<h3 id="how-can-i-optimize-costs-with-karpenter">How can I optimize costs with Karpenter?</h3>
<ul>
<li>Use spot instances for fault-tolerant workloads</li>
<li>Set appropriate expiration times for security updates</li>
<li>Configure consolidation policies</li>
<li>Use resource limits to prevent unexpected scaling</li>
<li>Monitor and tune your NodePool configurations</li>
</ul>
<h2 id="integration-and-compatibility">Integration and Compatibility</h2>
<h3 id="does-karpenter-work-with-azure-policy">Does Karpenter work with Azure Policy?</h3>
<p>Yes, VMs provisioned by Karpenter are subject to Azure Policy rules applied to the resource group and subscription.</p>
<h3 id="can-i-use-karpenter-with-gitops-tools">Can I use Karpenter with GitOps tools?</h3>
<p>Yes, Karpenter resources (NodePools, AKSNodeClasses) can be managed through GitOps tools like ArgoCD or Flux.</p>
<h3 id="does-karpenter-support-windows-nodes">Does Karpenter support Windows nodes?</h3>
<p>Karpenter primarily focuses on Linux nodes. Windows node support is estimated to be ready by the end of 2025.</p>
<h2 id="getting-help">Getting Help</h2>
<h3 id="where-can-i-find-more-information">Where can I find more information?</h3>
<ul>
<li><a href="https://azure.github.io/karpenter-provider-azure/">Karpenter Azure Documentation</a></li>
<li><a href="https://github.com/Azure/karpenter-provider-azure">GitHub Repository</a></li>
<li><a href="https://kubernetes.slack.com/channels/azure-provider">Kubernetes Slack #azure-provider</a></li>
</ul>
<h3 id="how-do-i-report-bugs-or-request-features">How do I report bugs or request features?</h3>
<p>Create an issue in the <a href="https://github.com/Azure/karpenter-provider-azure/issues">GitHub repository</a> with:</p>
<ul>
<li>Detailed description of the issue</li>
<li>Steps to reproduce</li>
<li>Karpenter version and configuration</li>
<li>Relevant logs and error messages</li>
</ul>
<h3 id="is-there-commercial-support-available">Is there commercial support available?</h3>
<p>Yes, commercial support is offered through Azure support channels, so long as you are using the managed offering NAP rather than self hosted.</p>

	
	
	
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
          
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
          
            
  <ul class="list-inline mb-0">
    
      <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
        <a class="text-white" target="_blank" rel="noopener" href="https://github.com/Azure/karpenter-provider-azure" aria-label="GitHub">
          <i class="fab fa-github"></i>
        </a>
      </li>
    
      <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
        <a class="text-white" target="_blank" rel="noopener" href="https://slack.k8s.io/" aria-label="Slack">
          <i class="fab fa-slack"></i>
        </a>
      </li>
    
  </ul>

          
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2025 Microsoft Corporation or its affiliates. All Rights Reserved</small>
        
        
      </div>
    </div>
  </div>
</footer>


    </div>
    
  <script src="/js/main.js"></script>
<script src='/js/prism.js'></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>